<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>AJR Heardle - Debug Functionality</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #121212; 
            color: #ffffff; 
            padding: 20px; 
        }
        .test { 
            background: #333; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 5px; 
        }
        .success { background: #1d7e05; }
        .error { background: #ff0000; }
        .warning { background: #ff8800; }
        button { 
            background: #ff5500; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>AJR Heardle - Functionality Debug</h1>
    <div id="status">Running tests...</div>
    
    <div class="test">
        <h3>Test 1: Songs Array</h3>
        <div id="test1">Testing...</div>
    </div>
    
    <div class="test">
        <h3>Test 2: Today's Song Selection</h3>
        <div id="test2">Testing...</div>
    </div>
    
    <div class="test">
        <h3>Test 3: SoundCloud Player Creation</h3>
        <div id="test3">Testing...</div>
        <div id="player-test"></div>
    </div>
    
    <div class="test">
        <h3>Test 4: Game Functions</h3>
        <div id="test4">Testing...</div>
        <button onclick="testPlayButton()">Test Play Button</button>
        <button onclick="testGuessSubmission()">Test Guess Submission</button>
    </div>
    
    <div class="test">
        <h3>Test 5: Console Errors</h3>
        <div id="test5">Monitoring...</div>
    </div>

    <script>
        let testResults = {};
        let errorCount = 0;
        
        // Capture console errors
        window.addEventListener('error', function(e) {
            errorCount++;
            document.getElementById('test5').innerHTML = 
                `<span class="error">Error ${errorCount}: ${e.message} at ${e.filename}:${e.lineno}</span>`;
        });
        
        function updateTest(testId, message, status = 'info') {
            const element = document.getElementById(testId);
            element.innerHTML = `<span class="${status}">${message}</span>`;
            testResults[testId] = { message, status };
        }
        
        function testPlayButton() {
            try {
                // Simulate play button click
                console.log('Play button clicked - testing...');
                updateTest('test4', 'Play button test: Function called successfully', 'success');
            } catch (e) {
                updateTest('test4', `Play button test failed: ${e.message}`, 'error');
            }
        }
        
        function testGuessSubmission() {
            try {
                // Test guess submission
                const testGuess = "AJR - Bang!";
                console.log('Testing guess submission:', testGuess);
                updateTest('test4', `Guess submission test: "${testGuess}" processed`, 'success');
            } catch (e) {
                updateTest('test4', `Guess submission failed: ${e.message}`, 'error');
            }
        }
        
        // Run tests
        setTimeout(() => {
            // Test 1: Songs array
            if (typeof songs !== 'undefined' && Array.isArray(songs)) {
                updateTest('test1', `✓ Songs loaded: ${songs.length} songs found`, 'success');
            } else {
                updateTest('test1', '✗ Songs array not found or invalid', 'error');
            }
            
            // Test 2: Today's song
            try {
                if (typeof getTodaysSong === 'function') {
                    const todaysSong = getTodaysSong();
                    updateTest('test2', `✓ Today's song: ${todaysSong.answer}`, 'success');
                } else {
                    updateTest('test2', '✗ getTodaysSong function not found', 'error');
                }
            } catch (e) {
                updateTest('test2', `✗ Error getting today's song: ${e.message}`, 'error');
            }
            
            // Test 3: SoundCloud player
            try {
                if (songs && songs.length > 0) {
                    const testSong = songs[0];
                    const iframe = document.createElement('iframe');
                    iframe.width = "300";
                    iframe.height = "166";
                    iframe.src = `https://w.soundcloud.com/player/?url=${testSong.url}&color=%23ff5500&auto_play=false`;
                    document.getElementById('player-test').appendChild(iframe);
                    updateTest('test3', `✓ SoundCloud player created for: ${testSong.answer}`, 'success');
                } else {
                    updateTest('test3', '✗ No songs available for player test', 'error');
                }
            } catch (e) {
                updateTest('test3', `✗ Player creation failed: ${e.message}`, 'error');
            }
            
            // Test 4: Initialize as pending
            updateTest('test4', 'Click buttons above to test functionality', 'warning');
            
            // Test 5: Error monitoring
            if (errorCount === 0) {
                updateTest('test5', '✓ No JavaScript errors detected', 'success');
            }
            
        }, 1000);
        
    </script>
    
    <!-- Load the game files -->
    <script defer src="songs.js"></script>
    <script defer src="main-fixed.js"></script>
</body>
</html>
